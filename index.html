<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Escape Game Arcanes</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- HUD -->
<div id="hud" class="hidden">
  <span id="hud-player">👤</span>
  <span id="score">⭐ 0</span>
  <span id="timer">⏳ 0:00</span>
</div>

<!-- Écrans -->
<div id="screen-pseudo" class="screen">
  <h1>Entrez votre pseudo</h1>
  <input type="text" id="player-name" placeholder="Votre pseudo">
  <button id="start-btn">Commencer</button>
</div>

<div id="screen-intro" class="screen hidden">
  <h1>Bienvenue !</h1>
  <p id="intro-content"></p>
  <button id="begin-game">Commencer l’aventure</button>
</div>

<div id="screen-game" class="screen hidden">
  <h1>Jeu en cours</h1>
  <div id="puzzle-container"></div>
</div>

<div id="screen-victory" class="screen hidden">
  <h1>🎉 Victoire !</h1>
  <p>Vous avez terminé le jeu avec succès !</p>
  <button onclick="resetGame()">Recommencer</button>
</div>

<div id="screen-defeat" class="screen hidden">
  <h1>💀 Défaite</h1>
  <p>Le temps est écoulé ou vous avez échoué.</p>
  <button onclick="resetGame()">Réessayer</button>
</div>

<script type="module">
import { initRouter, startNextMiniGame, resetGame } from "./js/router.js";
import { setPlayerName } from "./js/state.js";
import { initAdminPanel } from "./js/admin.js";
import "./js/audio.js";

document.addEventListener("DOMContentLoaded", () => {
  initRouter();
  initAdminPanel();

  const startBtn = document.getElementById("start-btn");
  const beginBtn = document.getElementById("begin-game");

  startBtn.addEventListener("click", () => {
    const name = document.getElementById("player-name").value.trim();
    if (!name) return alert("Entre un pseudo !");
    setPlayerName(name);
    document.getElementById("intro-content").textContent = `Bienvenue ${name}, le royaume t’attend...`;
    document.getElementById("hud").classList.add("hidden");
    document.getElementById("screen-intro").classList.remove("hidden");
    document.getElementById("screen-pseudo").classList.add("hidden");
  });

  beginBtn.addEventListener("click", () => {
    document.getElementById("hud").classList.remove("hidden");
    startNextMiniGame();
  });
});
</script>

</body>
</html>
