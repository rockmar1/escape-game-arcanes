<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Escape Game Magique</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Écran de pseudo -->
  <div id="pseudoScreen" class="screen">
    <h1>Bienvenue dans l’Escape Game Magique</h1>
    <input type="text" id="pseudoInput" placeholder="Entre ton pseudo">
    <button onclick="demarrerJeu()">Commencer</button>
  </div>

  <!-- Intro grimoire -->
  <div id="introScreen" class="screen hidden">
    <div class="grimoire">
      <div class="page gauche"></div>
      <div class="page droite">
        <h2>Chapitre 1 : Le Royaume Oublié</h2>
        <p>
          Il était une fois, dans un royaume baigné autrefois de lumière, une ombre
          s’étendit et plongea le monde dans un sommeil éternel. Les anciens grimoires
          racontent que seuls des aventuriers courageux pourront lever cette malédiction.  
          Pour y parvenir, vous devrez résoudre des énigmes, dénicher des artefacts, 
          et faire appel à la magie avec sagesse.  
          <br><br>
          Le temps vous est compté… L’horloge de la destinée tourne déjà.
        </p>
      </div>
    </div>
    <button onclick="lancerEnigmes()">Entrer dans l’aventure</button>
  </div>

  <!-- Zone du jeu -->
  <div id="gameScreen" class="screen hidden">
    <img src="images/decor-magique.jpg" id="decor" alt="Décor magique">

    <!-- Timer -->
    <div id="timer">Temps restant : 30:00</div>

    <!-- Énigmes -->
    <div id="enigme1" class="enigme">
      <h2>Énigme 1</h2>
      <p>Je suis toujours devant toi mais tu ne peux jamais m’atteindre. Qui suis-je ?</p>
      <input type="text" id="reponse1">
      <button onclick="validerEnigme(1)">Valider</button>
      <p class="indice hidden">Indice : tu peux toujours essayer de courir après…</p>
    </div>

    <div id="enigme2" class="enigme hidden">
      <h2>Énigme 2</h2>
      <p>Plus tu en prends, plus tu en laisses derrière toi. Que suis-je ?</p>
      <input type="text" id="reponse2">
      <button onclick="validerEnigme(2)">Valider</button>
      <p class="indice hidden">Indice : regarde bien le sol après une promenade…</p>
    </div>

    <div id="enigme3" class="enigme hidden">
      <h2>Énigme 3</h2>
      <p>On me casse mais je ne tombe jamais, que suis-je ?</p>
      <input type="text" id="reponse3">
      <button onclick="validerEnigme(3)">Valider</button>
      <p class="indice hidden">Indice : cela arrive souvent dans une conversation…</p>
    </div>
  </div>

  <!-- Inventaire -->
  <div id="inventaire" class="hidden">
    <h3>Inventaire</h3>
    <div id="contenuInventaire"></div>
  </div>

  <!-- Container pour pluie/confettis -->
  <div id="effectsContainer"></div>

  <!-- Écran fin -->
  <div id="endScreen" class="screen hidden">
    <img id="endImage" src="" alt="Fin" class="end-background">
    <div id="finNarrative"></div>
    <div id="scoreScreen">
      <h2>Tableau des scores</h2>
      <table>
        <thead>
          <tr>
            <th>Pseudo</th>
            <th>Résultat</th>
            <th>Temps</th>
            <th>Bonus utilisés</th>
          </tr>
        </thead>
        <tbody id="scoreTableBody"></tbody>
      </table>
      <button onclick="rejouer()">Rejouer</button>
    </div>
  </div>

  <!-- Sons -->
  <audio id="musiqueIntro" src="sons/intro.mp3" loop></audio>
  <audio id="musiqueAmbiance" src="sons/ambiance.mp3" loop></audio>
  <audio id="musiqueVictoire" src="sons/victoire.mp3"></audio>
  <audio id="musiqueDefaite" src="sons/defaite.mp3"></audio>
  <audio id="sonBonus" src="sons/bonus.mp3"></audio>

  <script src="script.js"></script>
</body>
</html>
